<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Debug Twilio WebRTC</title>
    <script src="https://media.twiliocdn.com/sdk/js/client/v1.13/twilio.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const callButton = document.getElementById("call-button");
        const toNumberInput = document.getElementById("to-number-input");
        const fromNumberInput = document.getElementById("from-number-input");

        callButton.addEventListener("click", () => {
          const toNumber = toNumberInput.value.trim();
          const fromNumber = fromNumberInput.value.trim();

          if (!toNumber || !fromNumber) {
            alert("Please provide both 'From' and 'To' numbers.");
            return;
          }

          console.log("Calling Twilio with parameters:", {
            To: toNumber,
            From: fromNumber,
          });

          // Simulate Twilio Device connect
          fetch("https://your-backend-url/incoming-call?From=" + encodeURIComponent(fromNumber) + "&To=" + encodeURIComponent(toNumber))
            .then((response) => {
              console.log("Backend response:", response);
              return response.text();
            })
            .then((data) => {
              console.log("Response data:", data);
            })
            .catch((error) => {
              console.error("Error calling backend:", error);
            });
        });
      });
    </script>
  </head>
  <body>
    <div>
      <label for="to-number-input">To Number:</label>
      <input type="text" id="to-number-input" placeholder="e.g. +13252464243" />
      <label for="from-number-input">From Number:</label>
      <input type="text" id="from-number-input" placeholder="e.g. +923164203806" />
      <button id="call-button">Call</button>
    </div>
  </body>
</html>
